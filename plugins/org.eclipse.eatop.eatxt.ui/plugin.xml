<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

	<extension point="org.eclipse.ui.handlers">
		<handler class="org.eclipse.eatop.eatxt.ui.EatxtChildExecutableExtensionFactory:org.eclipse.eatop.eatxt.ui.handlers.OpenAsEatxtHandler" commandId="org.eclipse.eatop.eatxt.commands.openAsEatxt">
			<enabledWhen>
				<with variable="activePartId">
					<equals value="org.eclipse.eatop.examples.editor.eastadl"></equals>
				</with>
			</enabledWhen>
		</handler>
	</extension>

	<!-- TODO: Bind this to the context menu of the editor only -->
	<extension point="org.eclipse.ui.menus">
		<menuContribution allPopups="false" locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<separator name="org.eclipse.eatop.eatxt.generic.separator2"></separator>
			<command commandId="org.eclipse.eatop.eatxt.commands.openAsEatxt" label="Open as Eatxt" style="push" tooltip="Opens the selected model element as Eatxt"></command>
			<separator name="org.eclipse.eatop.eatxt.generic.separator1"></separator>
		</menuContribution>
	</extension>
	
	<extension point="org.eclipse.ui.commands">
		<command categoryId="org.eclipse.eatop.eatxt.ui.commands.category"
			id="org.eclipse.eatop.eatxt.commands.openAsEatxt" name="Open as Eatxt">
		</command>
		<category id="org.eclipse.eatop.eatxt.ui.commands.category" name="EATOP Eatxt Integration">
		</category>
	</extension>

</plugin>